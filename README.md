```markdown
# ü§ñ GigaChat MCP AI-–ê–≥–µ–Ω—Ç —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º

–£–º–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –Ω–∞ –±–∞–∑–µ **GigaChat** —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≤—ã–∑–æ–≤–∞ –≤–Ω–µ—à–Ω–∏—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤, –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ **Tarantool**.  
–ü—Ä–æ–µ–∫—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `LangGraph`, `LangChain`, `MCP (Model Context Protocol)` –∏ `FastAPI`.

---

## üîß –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ **–ú–Ω–æ–≥–æ—à–∞–≥–æ–≤—ã–µ –∞–≥–µ–Ω—Ç—ã** —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≤—ã–∑–æ–≤–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤  
- ‚úÖ **–ê–Ω–∞–ª–∏–∑ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏—Ö –ª–∏—Ü –ø–æ –ò–ù–ù** —á–µ—Ä–µ–∑ DaData –∏ InfoSphere  
- ‚úÖ **–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã**: —Ä–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏, –≤—Ä–µ–º—è, –∑–∞–º–µ—Ç–∫–∏  
- ‚úÖ **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤** —á–µ—Ä–µ–∑ Tarantool (—Å TTL)  
- ‚úÖ **MCP-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π —Å–µ—Ä–≤–µ—Ä** –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å IDE –∏ –∞–≥–µ–Ω—Ç–∞–º–∏  
- ‚úÖ **–°–µ—Å—Å–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** —Å –∏—Å—Ç–æ—Ä–∏–µ–π –¥–∏–∞–ª–æ–≥–∞  
- ‚úÖ **–†—É—Å—Å–∫–∏–π —è–∑—ã–∫** –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é  

---

## üì¶ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

| –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è   | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|--------------|------------|
| `GigaChat`   | –Ø–∑—ã–∫–æ–≤–∞—è –º–æ–¥–µ–ª—å –æ—Ç –°–±–µ—Ä–∞ |
| `LangGraph`  | –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –∞–≥–µ–Ω—Ç–æ–≤ –∏ –≥—Ä–∞—Ñ–æ–≤ |
| `FastAPI`    | HTTP API |
| `Tarantool`  | –ë—ã—Å—Ç—Ä–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å TTL |
| `MCP Server` | –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Model Context Protocol |
| `aiohttp`    | –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ HTTP-–∑–∞–ø—Ä–æ—Å—ã |
| `xmltodict`  | –ü–∞—Ä—Å–∏–Ω–≥ XML –æ—Ç InfoSphere |

---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
pip install -r requirements.txt
```
> –¢—Ä–µ–±—É–µ—Ç—Å—è **Python 3.10+**

---

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª **.env**:

```env
# GigaChat
GIGA_API_KEY=your_gigachat_api_key

# DaData
DADATA_API_KEY=your_dadata_api_key
DADATA_URL=https://suggestions.dadata.ru/suggestions/api/4_1/rs/findById/party

# InfoSphere
INFOSPHERE_LOGIN=your_login
INFOSPHERE_PASSWORD=your_password
INFOSPHERE_URL=https://api.infosphere.ru/xml

# Tarantool
TARANTOOL_HOST=localhost
TARANTOOL_PORT=3301
TARANTOOL_USER=guest
TARANTOOL_PASSWORD=
```

üîê –í—Å–µ –∫–ª—é—á–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ `app/settings.py` —á–µ—Ä–µ–∑ `pydantic.BaseSettings`.

---

## üöÄ –ó–∞–ø—É—Å–∫

```bash
python -m app.main
```

–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞:  
- **HTTP API:** [http://localhost:8000](http://localhost:8000)  
- **MCP Server:** —á–µ—Ä–µ–∑ `stdio` (–¥–ª—è IDE)  

---

## üåê API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

### üîπ –û—Å–Ω–æ–≤–Ω–æ–π –∑–∞–ø—Ä–æ—Å –∫ –∞–≥–µ–Ω—Ç—É
`POST /prompt`

```json
{
  "prompt": "–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –∫–ª–∏–µ–Ω—Ç–∞ —Å –ò–ù–ù 7702302345",
  "session_id": "session_123"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "response": "–ö–æ–º–ø–∞–Ω–∏—è –∞–∫—Ç–∏–≤–Ω–∞, —Ä–∏—Å–∫ –Ω–∏–∑–∫–∏–π...",
  "session_id": "session_123",
  "tools_used": true,
  "timestamp": "2025-09-01T12:00:00"
}
```

---

### üîπ –ò—Å—Ç–æ—Ä–∏—è —Å–µ—Å—Å–∏–∏
`GET /sessions/{session_id}` ‚Äî –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–∞  

---

## üß∞ –î–æ—Å—Ç—É–ø–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

| –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç           | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|----------------------|------------|
| `get_current_time`   | –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è |
| `count_files`        | –ü–æ—Å—á–∏—Ç–∞—Ç—å —Ñ–∞–π–ª—ã –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ |
| `read_file`          | –ü—Ä–æ—á–∏—Ç–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ |
| `create_note`        | –°–æ–∑–¥–∞—Ç—å —Ç–µ–∫—Å—Ç–æ–≤—É—é –∑–∞–º–µ—Ç–∫—É |
| `fetch_company_info` | –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –æ –∫–æ–º–ø–∞–Ω–∏–∏ –ø–æ –ò–ù–ù |

üìå –ü—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ –ø–æ –ò–ù–ù –∞–≥–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑—ã–≤–∞–µ—Ç `fetch_company_info`, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–≤–æ–¥.  

---

## üîÑ –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã –∞–≥–µ–Ω—Ç–∞

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å  
2. –ê–≥–µ–Ω—Ç –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –Ω—É–∂–µ–Ω –ª–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç  
3. –ï—Å–ª–∏ –¥–∞ ‚Äî –≤—ã–∑—ã–≤–∞–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç  
4. –ú–æ–¥–µ–ª—å –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç  
5. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏—Ç–æ–≥–æ–≤—ã–π –æ—Ç–≤–µ—Ç  

üîÅ –ì—Ä–∞—Ñ —Ä–∞–±–æ—Ç—ã:
```
agent ‚Üí tools ‚Üí agent ‚Üí –æ—Ç–≤–µ—Ç
```

---

## üóÉÔ∏è –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

- –í—Å–µ —Ç—è–∂—ë–ª—ã–µ –∑–∞–ø—Ä–æ—Å—ã (**DaData**, **InfoSphere**) –∫—ç—à–∏—Ä—É—é—Ç—Å—è –≤ **Tarantool**  
- TTL: **1‚Äì2 —á–∞—Å–∞** (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞)  
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **msgpack** –¥–ª—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏  
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ `max_map_len`, –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∏ –ø–æ–≤—Ä–µ–∂–¥—ë–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö  

---

## üõ†Ô∏è –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ Tarantool
```bash
tarantoolctl connect localhost:3301
> box.space.cache:select()
```

### –õ–æ–≥–∏
- **INFO** ‚Äî –æ—Å–Ω–æ–≤–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è  
- **ERROR** ‚Äî –æ—à–∏–±–∫–∏ Tarantool, –≤—ã–∑–æ–≤–æ–≤, –ø–∞—Ä—Å–∏–Ω–≥–∞  

---

## üîó MCP-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

–°–µ—Ä–≤–µ—Ä —Å–æ–≤–º–µ—Å—Ç–∏–º —Å **MCP-–∫–ª–∏–µ–Ω—Ç–∞–º–∏** (–Ω–∞–ø—Ä–∏–º–µ—Ä, VS Code –∏–ª–∏ JetBrains).  

---

## üß™ –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

### –£–∑–Ω–∞—Ç—å —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è
```bash
curl -X POST http://localhost:8000/prompt \
  -H "Content-Type: application/json" \
  -d '{
    "prompt": "–ö–æ—Ç–æ—Ä—ã–π —á–∞—Å?",
    "session_id": "test1"
  }'
```

### –ê–Ω–∞–ª–∏–∑ –∫–ª–∏–µ–Ω—Ç–∞ –ø–æ –ò–ù–ù
```bash
curl -X POST http://localhost:8000/prompt \
  -H "Content-Type: application/json" \
  -d '{
    "prompt": "–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –∫–ª–∏–µ–Ω—Ç–∞ —Å –ò–ù–ù 7702302345",
    "session_id": "client_analysis_1"
  }'
```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
app/
‚îú‚îÄ‚îÄ main.py            # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ server.py          # –ì—Ä–∞—Ñ –∞–≥–µ–Ω—Ç–∞ –∏ MCP-—Å–µ—Ä–≤–µ—Ä
‚îú‚îÄ‚îÄ session.py         # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏
‚îú‚îÄ‚îÄ tools.py           # –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
‚îú‚îÄ‚îÄ fetch_data.py      # –ó–∞–ø—Ä–æ—Å—ã –∫ DaData –∏ InfoSphere
‚îú‚îÄ‚îÄ storage/
‚îÇ   ‚îî‚îÄ‚îÄ tarantool.py   # –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îú‚îÄ‚îÄ prompts.py         # –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç
‚îú‚îÄ‚îÄ settings.py        # –ù–∞—Å—Ç—Ä–æ–π–∫–∏
‚îî‚îÄ‚îÄ utils.py           # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
```

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.  
–†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è **–±–µ–∑ –ª–∏—Ü–µ–Ω–∑–∏–∏**.

---

üí° –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫: *Korch Ivan*  
üìÖ –ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: *–°–µ–Ω—Ç—è–±—Ä—å 2025*